# Soc_SPI_I2C

## ğŸš€ SoC\_SPI\_I2C: í†µì‹  ì¸í„°í˜ì´ìŠ¤ ì„¤ê³„ ë° ê²€ì¦ (Communication Interface Design and Verification)

[cite_start]ë³¸ í”„ë¡œì íŠ¸ëŠ” ëŒ€í‘œì ì¸ ë™ê¸°ì‹ ì§ë ¬ í†µì‹  í”„ë¡œí† ì½œì¸ **SPI (Serial Peripheral Interface)**ì™€ **I2C (Inter-Integrated Circuit)** í†µì‹  ì¸í„°í˜ì´ìŠ¤ë¥¼ **SystemVerilog (HDL)**ë¡œ ì„¤ê³„í•˜ê³  [cite: 388][cite_start], ì´ë¥¼ ì‹¤ì œ í•˜ë“œì›¨ì–´ ì œì–´ ì• í”Œë¦¬ì¼€ì´ì…˜ì— ì ìš©í•˜ë©° **UVM(Universal Verification Methodology)**ì„ ì´ìš©í•´ ê²€ì¦í•˜ëŠ” ê²ƒì„ ëª©í‘œë¡œ í•©ë‹ˆë‹¤[cite: 392, 393].

### ğŸ¯ ì£¼ìš” ëª©í‘œ (Key Goals)

* [cite_start]**Communication Interface:** SPI / I2C í†µì‹  ì¸í„°í˜ì´ìŠ¤ ì„¤ê³„[cite: 388].
* [cite_start]**Application:** í•˜ë“œì›¨ì–´ë¥¼ ì œì–´í•  ìˆ˜ ìˆëŠ” ì• í”Œë¦¬ì¼€ì´ì…˜ êµ¬í˜„[cite: 391].
* [cite_start]**Verification:** UVM í”„ë ˆì„ì›Œí¬ë¥¼ ì´ìš©í•œ í†µì‹  í”„ë¡œí† ì½œ ê²€ì¦[cite: 392, 393].

***

## ğŸ› ï¸ 1. SPI í†µì‹  í”„ë¡œì íŠ¸: Upcounter êµ¬í˜„

[cite_start]SPI í†µì‹  ëª¨ë“ˆì„ ì„¤ê³„í•˜ê³ , ì´ë¥¼ ì´ìš©í•˜ì—¬ ë§ˆìŠ¤í„° ë³´ë“œì—ì„œ ìƒì„±ëœ ì¹´ìš´íŠ¸ ê°’ì„ ìŠ¬ë ˆì´ë¸Œ ë³´ë“œì˜ **7-ì„¸ê·¸ë¨¼íŠ¸(FND)ì— í‘œì‹œ**í•˜ëŠ” Upcounter ì‹œìŠ¤í…œì„ êµ¬í˜„í–ˆìŠµë‹ˆë‹¤[cite: 474].



### SPI í†µì‹  íŠ¹ì§•

* [cite_start]**êµ¬ì¡°:** ë§ˆìŠ¤í„°ì™€ ìŠ¬ë ˆì´ë¸Œë¡œ êµ¬ì„±ë˜ëŠ” ë™ê¸°ì‹ ì§ë ¬ í†µì‹  í”„ë¡œí† ì½œì…ë‹ˆë‹¤[cite: 395].
* [cite_start]**ì‹ í˜¸ì„ :** 4-Wire (SCLK, MOSI, MISO, CS)ë¥¼ ì‚¬ìš©í•˜ë©°, 1:N í†µì‹ ì´ ê°€ëŠ¥í•©ë‹ˆë‹¤[cite: 452, 446].
* [cite_start]**í†µì‹  ë°©ì‹:** í´ëŸ­ ì‹ í˜¸ë¡œ íƒ€ì´ë°ì„ ë™ê¸°í™”í•˜ë©° [cite: 396][cite_start], ë™ì‹œì— ë°ì´í„° ì†¡ìˆ˜ì‹ (ì „ì´ì¤‘ í†µì‹ )ì´ ê°€ëŠ¥í•©ë‹ˆë‹¤[cite: 397].

### ëª¨ë“ˆ êµ¬ì„± (Block Diagram)

| êµ¬ë¶„ | íŒŒì¼ëª… | ì—­í•  ë° ì£¼ìš” ê¸°ëŠ¥ |
| :--- | :--- | :--- |
| **Master** | `spi_master.sv` | [cite_start]SPI í†µì‹  ë§ˆìŠ¤í„° ë¡œì§ êµ¬í˜„ (CPOL=0, CPHA=0 ì„¤ì •)[cite: 225]. |
| | `upcounter.sv` | [cite_start]`run`, `stop`, `clear` ì‹ í˜¸ë¥¼ ë°›ì•„ **16ë¹„íŠ¸ ì¹´ìš´í„°**ë¥¼ ì œì–´í•˜ê³ , ì´ ê°’ì„ 8ë¹„íŠ¸ì”© ë‚˜ëˆ„ì–´ SPI ë§ˆìŠ¤í„°ë¡œ ì „ì†¡í•˜ëŠ” Master Control Unit ì—­í• ì„ ìˆ˜í–‰í•©ë‹ˆë‹¤[cite: 234, 238]. |
| **Slave** | `spi_slave.sv` | SPI í†µì‹  ìŠ¬ë ˆì´ë¸Œ ë¡œì§ êµ¬í˜„. |
| | `control_unit.sv` | [cite_start]ìŠ¬ë ˆì´ë¸Œë¡œë¶€í„° ìˆ˜ì‹ ëœ ìƒìœ„ 8ë¹„íŠ¸/í•˜ìœ„ 8ë¹„íŠ¸ë¥¼ ê²°í•©í•˜ì—¬ **14ë¹„íŠ¸** ì¹´ìš´íŠ¸ ë°ì´í„°(`count_data` = `data_reg[13:0]`)ë¥¼ FND ì»¨íŠ¸ë¡¤ëŸ¬ì— ì „ë‹¬í•©ë‹ˆë‹¤[cite: 38, 49]. |
| | `fnd_controller.sv` | [cite_start]14ë¹„íŠ¸ ì¹´ìš´íŠ¸ ë°ì´í„°ë¥¼ ë°›ì•„ 4-Digit FNDë¥¼ ë™ì  êµ¬ë™í•©ë‹ˆë‹¤[cite: 1, 37]. |

***

## ğŸ”¬ 2. I2C í†µì‹  ì„¤ê³„ ë° UVM ê²€ì¦

[cite_start]I2C í†µì‹  í”„ë¡œí† ì½œì„ ì„¤ê³„í•˜ê³ , **UVM (Universal Verification Methodology)** í™˜ê²½ì„ êµ¬ì¶•í•˜ì—¬ ì„¤ê³„ì˜ ì •í•©ì„±ì„ ê²€ì¦í–ˆìŠµë‹ˆë‹¤[cite: 545].

### I2C í†µì‹  íŠ¹ì§•

* [cite_start]**ê°œë°œ:** í•„ë¦½ìŠ¤ì—ì„œ ê°œë°œëœ ë™ê¸°ì‹ ì§ë ¬ í†µì‹  í”„ë¡œí† ì½œì…ë‹ˆë‹¤[cite: 503].
* [cite_start]**ì‹ í˜¸ì„ :** 2-Wire (**SCL**, **SDA**)ì„ ì‚¬ìš©í•˜ëŠ” ë°˜ì´ì¤‘ í†µì‹ ì…ë‹ˆë‹¤[cite: 505, 507].
* [cite_start]**ì‹ í˜¸:** Open Drain êµ¬ì¡°ë¥¼ ì‚¬ìš©í•©ë‹ˆë‹¤[cite: 508].
* [cite_start]**í”„ë¡œí† ì½œ:** **START ì¡°ê±´** (SDA Highâ†’Low, SCL High)ìœ¼ë¡œ í†µì‹ ì„ ì‹œì‘í•˜ë©°, ì£¼ì†Œ(7ë¹„íŠ¸)ì™€ ì½ê¸°/ì“°ê¸° ë¹„íŠ¸ë¥¼ í†µí•´ ë°ì´í„°ë¥¼ ì†¡ìˆ˜ì‹ í•©ë‹ˆë‹¤[cite: 513, 514].



### UVM ê²€ì¦ í™˜ê²½ (`tb_i2c.sv`)

* **ëª©í‘œ:** I2C Write ë™ì‘ (ì£¼ì†Œ + ë°ì´í„° ì“°ê¸°)ì„ ê²€ì¦í•©ë‹ˆë‹¤.
* [cite_start]**êµ¬ì¡°:** Sequence, Sequencer, Driver, Monitor, Scoreboard í‘œì¤€ UVM ì»´í¬ë„ŒíŠ¸ë¥¼ ì‚¬ìš©í•˜ì—¬ êµ¬ì¶•ë˜ì—ˆìŠµë‹ˆë‹¤[cite: 547, 560].
    * [cite_start]**Sequencer:** `i2c_seq_item` íŠ¸ëœì­ì…˜ì„ ìƒì„±í•˜ì—¬ Driverì— ì „ë‹¬í•©ë‹ˆë‹¤[cite: 562].
    * [cite_start]**Driver:** íŠ¸ëœì­ì…˜ì„ DUT(`i2c_master`)ì˜ ì¸í„°í˜ì´ìŠ¤ ì‹ í˜¸ë¡œ ë³€í™˜í•˜ì—¬ ì¸ê°€í•©ë‹ˆë‹¤[cite: 562].
    * [cite_start]**Monitor:** DUT ì¸í„°í˜ì´ìŠ¤ì˜ ì‹ í˜¸ë¥¼ ë‹¤ì‹œ íŠ¸ëœì­ì…˜ìœ¼ë¡œ ë³€í™˜í•˜ì—¬ Scoreboardì— ì „ë‹¬í•©ë‹ˆë‹¤[cite: 562].
    * [cite_start]**Scoreboard:** ë§ˆìŠ¤í„° ì†¡ì‹  ë°ì´í„°(`tr.data`)ì™€ ìŠ¬ë ˆì´ë¸Œ ìˆ˜ì‹  ë°ì´í„°(`tr.s_data`)ë¥¼ ë¹„êµí•˜ì—¬ DUT ë™ì‘ì˜ ì¼ì¹˜ ì—¬ë¶€ë¥¼ ê²€ì¦í•©ë‹ˆë‹¤[cite: 204, 562].

### ê²€ì¦ ê²°ê³¼

* [cite_start]**Total Transactions:** 256 [cite: 619]
* [cite_start]**Tests Passed:** 256 [cite: 620]
* [cite_start]**Tests Failed:** 0 [cite: 621]
* **ê²°ë¡ :** ì´ 256ê°œì˜ í…ŒìŠ¤íŠ¸ë¥¼ ìˆ˜í–‰í•˜ì—¬ **ëª¨ë‘ ì„±ê³µ**í–ˆìŠµë‹ˆë‹¤.

***

## ğŸ–¥ï¸ 3. C ì• í”Œë¦¬ì¼€ì´ì…˜ ë° ìµœì¢… êµ¬í˜„

[cite_start]I2C Master IPë¥¼ **AXI Interface**ë¡œ êµ¬í˜„í•˜ê³  [cite: 624, 625][cite_start], Microblaze ê¸°ë°˜ì˜ SoC í™˜ê²½ì— í†µí•©í–ˆìŠµë‹ˆë‹¤[cite: 653]. [cite_start]C ì• í”Œë¦¬ì¼€ì´ì…˜ì„ í†µí•´ Slave ë³´ë“œì˜ ì£¼ë³€ ì¥ì¹˜(LED, FND)ë¥¼ ì œì–´í•˜ëŠ” ì‹œìŠ¤í…œì„ êµ¬ì¶•í–ˆìŠµë‹ˆë‹¤[cite: 665].



### êµ¬í˜„ êµ¬ì¡° (Microblaze + I2C)

* [cite_start]**Master Board:** Microblaze CPU, AXI4 Lite, I2C Master IP, UART í†µì‹ ì„ í¬í•¨í•©ë‹ˆë‹¤[cite: 655, 656, 657, 662].
* [cite_start]**Slave Board:** I2C Slave ëª¨ë“ˆ, LED, FNDë¡œ êµ¬ì„±ë©ë‹ˆë‹¤[cite: 660, 661, 663, 664].
* [cite_start]**SW ê³„ì¸µ:** C Application(`UART FND LED control`)ì—ì„œ FND/LED Driverë¥¼ í†µí•´ I2C í†µì‹ ìœ¼ë¡œ Slave ë³´ë“œì˜ í•˜ë“œì›¨ì–´ë¥¼ ì œì–´í•˜ëŠ” ê³„ì¸µ êµ¬ì¡°ë¥¼ ê°€ì§‘ë‹ˆë‹¤[cite: 667, 672, 673].

***

## ğŸ’¡ ê³ ì°° (Conclusion)

* [cite_start]**í†µì‹  í”„ë¡œí† ì½œ ì´í•´:** ëŒ€í‘œì ì¸ ì‹œë¦¬ì–¼ í†µì‹ ë“¤ì„ ì§ì ‘ ì„¤ê³„í•˜ê³  ì ìš©í•´ ë³´ë©´ì„œ ê¸°ìˆ ì  ì´í•´ë„ê°€ í–¥ìƒë˜ì—ˆìŠµë‹ˆë‹¤[cite: 696].
* [cite_start]**Debuggingì˜ ì¤‘ìš”ì„±:** Verdi íŒŒí˜• ë¶„ì„ê³¼ Logic Analyzerë¥¼ í™œìš©í•œ ë””ë²„ê¹…ì„ í†µí•´ ë¬¸ì œ í•´ê²° ëŠ¥ë ¥ì„ í‚¤ì› ìŠµë‹ˆë‹¤[cite: 698, 736].
