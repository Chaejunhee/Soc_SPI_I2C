# Soc_SPI_I2C

🚀 SPI / I2C 통신 인터페이스 설계 및 검증📝 프로젝트 개요 (Project Overview)본 프로젝트는 대표적인 동기식 직렬 통신 프로토콜인 **SPI (Serial Peripheral Interface)**와 I2C (Inter-Integrated Circuit) 통신 인터페이스를 **SystemVerilog (HDL)**로 직접 설계하고, 이를 실제 하드웨어 제어 애플리케이션에 적용 및 검증하는 것을 목표로 합니다11111.주요 목표 2Communication Interface: 데이터를 전송할 수 있는 SPI / I2C 통신 인터페이스 설계3.Application: 설계된 통신을 활용하여 하드웨어를 제어하는 애플리케이션 구현4.Verification: UVM(Universal Verification Methodology) 프레임워크를 이용한 통신 프로토콜 검증5.🛠️ SPI 통신 프로젝트 (SPI Upcounter)SPI 통신 모듈을 설계하고, 이를 이용하여 마스터 보드에서 생성된 카운트 값을 슬레이브 보드의 7-세그먼트(FND)에 표시하는 Upcounter 시스템을 구현했습니다.블록 다이어그램구분모듈기능Masterspi_master.svSPI 통신 마스터 모듈 설계. CPOL/CPHA=0/0로 설정하여 클럭을 제어하고 데이터를 전송합니다6.upcounter.svrun, stop, clear 버튼 입력을 받아 16비트 카운터(counter_reg, counter_next는 16비트 7)를 관리하고, 이 값을 8비트씩 나누어 SPI 마스터로 전송하는 Master Control Unit 역할을 수행합니다888888888.Slavespi_slave.svSPI 통신 슬레이브 모듈 설계. 마스터로부터 수신된 8비트 데이터를 처리합니다.control_unit.svSPI 슬레이브로부터 수신된 8비트 데이터 2개(Upper/Down bit)를 결합하여 14비트 카운트 데이터(count_data 9)로 만들어 FND 컨트롤러에 전달합니다101010101010101010.fnd_controller.sv수신된 카운트 데이터(counter 11)를 받아 4-Digit FND에 동적으로 표시하는 모듈입니다12.SPI 통신 특징구조: 마스터와 슬레이브로 구성되는 동기식 직렬 통신 프로토콜13131313.신호선 (4-Wire): SCLK, MOSI, MISO, CS/SS14.통신 방식: 동시에 데이터 송수신(전이중 통신)이 가능합니다15.🔬 I2C 통신 설계 및 검증 (I2C Verification)I2C 통신 프로토콜 특징구조: 필립스에서 개발된 동기식 직렬 통신 프로토콜16.신호선 (2-Wire): SCL (Serial Clock), SDA (Serial Data)17.통신 방식: 마스터-슬레이브 구조의 반이중 통신18.버스 구조: Open Drain 구조를 사용합니다19.동작: START 조건 (SDA High→Low, SCL High 20)으로 시작하며, 주소(7비트)와 읽기/쓰기 비트를 통해 슬레이브를 선택하고 데이터를 송수신합니다21.I2C 마스터/슬레이브 설계모듈기능i2c_master.svI2C 통신 마스터를 설계. i2c_start, i2c_stop, tx_data 등의 신호를 받아 Start/Stop 조건 생성, 주소 및 데이터 전송, ACK/NACK 처리 로직을 구현합니다222222222222222222.i2c_slave.svI2C 통신 슬레이브를 설계. SCL 및 SDA 신호를 동기화하고, 수신된 주소를 확인하여 ACK 신호를 응답하며 마스터로부터 데이터를 수신합니다232323232323232323.UVM 기반 검증본 프로젝트에서는 UVM (Universal Verification Methodology) 프레임워크를 활용하여 I2C 통신 설계의 정합성을 검증했습니다24.테스트 환경 (tb_i2c.sv):Sequence/Sequencer: 랜덤한 데이터를 포함하는 i2c_seq_item 트랜잭션을 생성하고 드라이버에 전달합니다 (총 256개 트랜잭션 생성)252525252525252525.Driver: Sequencer로부터 받은 트랜잭션 데이터를 DUT(i2c_master)의 인터페이스 신호로 변환하여 인가합니다26.Monitor: DUT 인터페이스의 신호를 다시 트랜잭션으로 변환하여 Scoreboard에 전달합니다27272727.Scoreboard: 마스터가 보낸 데이터(tr.data)와 슬레이브가 수신한 데이터(tr.s_data)를 비교하여 DUT의 동작이 예상과 일치하는지 검증합니다28.검증 결과: 총 256개의 트랜잭션 테스트를 수행하여 **256개 모두 성공(Tests Passed: 256, Tests Failed: 0)**했습니다29292929.🖥️ C 애플리케이션 및 최종 구현Microblaze 기반 SoC 환경에서 I2C Master를 AXI IP로 구현하고 C 언어 기반의 애플리케이션을 통해 Slave Board (LED, FND)를 제어하는 시스템을 구축했습니다30303030.하드웨어 구성: Microblaze CPU, AXI4-Lite 인터페이스, I2C Master IP31313131.소프트웨어 계층: UART를 통한 사용자 입력 처리, FND/LED 드라이버, I2C 통신 계층, 하드웨어(I2C Slave, FND, LED)323232323232323232.최종 구현: FPGA 보드(Basys 3)를 이용하여 SPI Upcounter 동작과 I2C 통신을 통한 FND/LED 제어 시연333333333333333333.
